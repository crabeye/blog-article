<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">

    
    <title>Hexo的aomori主题使用Remark42搭建文章评论功能 | Climb Crab</title>

    <meta name="description" content="好记性不如烂笔头">
    <meta name="keywords" content="Remark42搭建,Hexo评论,Remark42需要SSL证书,Remrk42不能评论,Remrk42显示不了登陆选项">

    

    <meta property="og:locale" content="zh-CN" />
    <meta property="og:type" content="article" />
    <meta property="og:title" content= "Hexo的aomori主题使用Remark42搭建文章评论功能 | Climb Crab"  />
    <meta property="og:description" content= "好记性不如烂笔头" />
    <meta property="og:url" content="http://blog.liq2.com/article/20220002.html" />
    <meta property="og:site_name" content="" />
    <meta property="article:author" content="Bill Lee" />
    <meta property="article:publisher" content="" />
    <meta property="og:description" content="好记性不如烂笔头" />
    <meta name="twitter:title" content="Hexo的aomori主题使用Remark42搭建文章评论功能 | Climb Crab"/>
    <meta name="twitter:description" content="好记性不如烂笔头"/>
    <script type="application/ld+json">
        {
            "description": "好记性不如烂笔头",
            "author": { "@type": "Person", "name": "Bill Lee" },
            "@type": "BlogPosting",
            "url": "http://blog.liq2.com/article/20220002.html",
            "publisher": {
            "@type": "Organization",
            "logo": {
                "@type": "ImageObject",
                "url": "http://blog.liq2.com/images/avatar.png"
            },
            "name": "Bill Lee"
            },
            "headline": "Hexo的aomori主题使用Remark42搭建文章评论功能 | Climb Crab",
            "datePublished": "2022-05-15T05:32:25.000Z",
            "mainEntityOfPage": {
                "@type": "WebPage",
                "@id": "http://blog.liq2.com/article/20220002.html"
            },
            "@context": "http://schema.org"
        }
    </script>




    

    

    

    
    <link rel="icon" href="/images/favicon.ico">
    

    

    

    

    
<link rel="stylesheet" href="/dist/build.css?v=1651727875408.css">


    
<link rel="stylesheet" href="/dist/custom.css?v=1651727875408.css">


    <script>
        window.isPost = true
        window.aomori = {
            
            
            
        }
        window.aomori_logo_typed_animated = true
        window.aomori_search_algolia = false

    </script>

<meta name="generator" content="Hexo 6.2.0"></head>

<body>

    <div class="container">
    <header class="header">
        <div class="header-type">
            
            <div class="header-type-avatar avatar avatar-sm">
                <img src="/images/avatar.png" alt="Bill Lee">
            </div>
            
            <div class="header-type-inner">
                
                    <div id="typed-strings" style="display:none">
                        <p>Climb Crab</p>
                    </div>
                    <a class="header-type-title" id="typed" href="/"></a>
                
    
                
            </div>
        </div>
        <div class="header-menu">
            <div class="header-menu-inner">
                
                <a href="/">首页</a>
                
                <a href="/archives">归档列表</a>
                
                <a href="/categories/Web%E5%89%8D%E7%AB%AF">Web前端</a>
                
                <a href="/categories/Java%E5%90%8E%E7%AB%AF">Java后端</a>
                
            </div>
            <div class="header-menu-social">
                
    <a class="social" target="_blank" href="mailto:libiaolee@gmail.com">
        <box-icon type='email' name='message-rounded-dots'></box-icon>
    </a>

            </div>
        </div>

        <div class="header-menu-mobile">
            <div class="header-menu-mobile-inner" id="mobile-menu-open">
                <i class="icon icon-menu"></i>
            </div>
        </div>
    </header>

    <div class="header-menu-mobile-menu">
        <div class="header-menu-mobile-menu-bg"></div>
        <div class="header-menu-mobile-menu-wrap">
            <div class="header-menu-mobile-menu-inner">
                <div class="header-menu-mobile-menu-close" id="mobile-menu-close">
                    <i class="icon icon-cross"></i>
                </div>
                <div class="header-menu-mobile-menu-list">
                    
                    <a href="/">首页</a>
                    
                    <a href="/archives">归档列表</a>
                    
                    <a href="/categories/Web%E5%89%8D%E7%AB%AF">Web前端</a>
                    
                    <a href="/categories/Java%E5%90%8E%E7%AB%AF">Java后端</a>
                    
                </div>
            </div>
        </div>
    </div>

</div>

    <div class="container">
        <div class="main">
            <section class="inner">
                <section class="inner-main">
                    <div class="post">
    <article id="post-cl38l3x1800033ck199iz597o" class="article article-type-post" itemscope
    itemprop="blogPost">

    <div class="article-inner">

        
          
        
        
        

        
        <header class="article-header">
            
  
    <h1 class="article-title" itemprop="name">
      Hexo的aomori主题使用Remark42搭建文章评论功能
    </h1>
  

        </header>
        

        <div class="article-more-info article-more-info-post hairline">

            <div class="article-date">
  <time datetime="2022-05-15T05:32:25.000Z" itemprop="datePublished">2022-05-15</time>
</div>

            
            <div class="article-category">
                <a class="article-category-link" href="/categories/Web%E5%89%8D%E7%AB%AF/">Web前端</a>
            </div>
            

            
            <div class="article-tag">
                <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Hexo/" rel="tag">Hexo</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8/" rel="tag">工具使用</a></li></ul>
            </div>
            

            

        </div>

        <div class="article-entry post-inner-html hairline" itemprop="articleBody">
            <p>开始求生欲望极强的声明一下，本人刚刚开始玩Hexo几天，所以都是以我现在的水平表述操作过程，说得不对还请多多指正。</p>
<h2 id="环境说明"><a href="#环境说明" class="headerlink" title="环境说明"></a>环境说明</h2><ol>
<li>Hexo 6.2.0</li>
<li>主题 Aomori 1.35.0</li>
<li>Remark42 1.9.0</li>
<li>Remark42 部署服务器环境 wind10操作系统</li>
<li>nginx 1.21.6</li>
<li>部署环境，Github Pages</li>
</ol>
<h2 id="操作过程"><a href="#操作过程" class="headerlink" title="操作过程"></a>操作过程</h2><h4 id="配置自己的remark42服务器"><a href="#配置自己的remark42服务器" class="headerlink" title="配置自己的remark42服务器"></a><strong>配置自己的remark42服务器</strong></h4><p>官方提供两中配置方式，docker部署和二进制安装部署，本文使用windwos环境下的zip文件进行安装<br><a target="_blank" rel="noopener" href="https://github.com/umputun/remark42/releases/download/v1.9.0/remark42.windows-amd64.zip">点这里下载 Remark42-1.9.0</a></p>
<p>  下载后直接解压，文件结构也很简单</p>
<pre><code>.
+-- _config.yml
+-- var
|   +-- avanta
|   +-- backups
+-- remark42.windows-amd64.exe
+-- README.md
+-- LICENSE
</code></pre>
<p>  参考官方文档的例子  cmd到文件夹之后  直接用 remark42.windows-amd64.exe 后面带配置参数就可以跑起来， <a target="_blank" rel="noopener" href="https://remark42.com/docs/getting-started/installation/">官方文档说明</a></p>
<p>比如使用官方的启动例子就能运行起来：</p>
<pre><code class="bash">$ remark42.linux-amd64 server --secret=12345 --url=http://127.0.0.1:8080
</code></pre>
<p>运行之后你浏览器打开 <a target="_blank" rel="noopener" href="http://127.0.0.1:8080/web">http://127.0.0.1:8080/web</a>, 能够看到一个如下的页面，说明你已经跑起来 :smile:</p>
<div align="center">
</div>



<p>  参考启动参数，结合自身项目情况，我整理了几个可能你和我一样也可能用到的一个一个启动命令：</p>
<pre><code class="bash">remark42.windows-amd64.exe server --secret=not4you2know --url=https://sub.yourdomain.com --auth.github.cid=1107********9011b --auth.github.csec=a7665**********05741 --auth.anon --site=mySiteId
</code></pre>
<p>其中各个参数说明：</p>
<ul>
<li><p>–secret 必须参数，官方说明是secret key, can be any long and hard-to-guess string 具体是起什么作用？没有弄明白，又知道的请留言帮我解惑:handshake:</p>
</li>
<li><p>–url Remark42 服务器的URL 必须的参数， 这个也不知道起什么作用，我测试是设置内网<a href="http://127.0.0.1:8080地址，然后用nginx映射道外网域名使用自己的域名也没有发现问题">http://127.0.0.1:8080地址，然后用nginx映射道外网域名使用自己的域名也没有发现问题</a></p>
</li>
<li><p>–auth开头的参数，用于配置评论的身份认证，需要开通第三方的登陆认证权限，本例子直配置了github登陆认证权限，获取第三方应用分配的clientId和clientScret 分别对应–auth.github.cid和auth.github.csec两个值</p>
</li>
<li><p>–auth.anon 是否允许匿名评论(匿名评论也需要随便填入一个昵称)，只有key没有值，加上为true, 去掉就是false</p>
</li>
<li><p>–site 这个参数默认是remark, 必须和前端的配置一致，不一致可能导致之前评论会丢失</p>
<p>其他配置说明请参考官方说明 <a target="_blank" rel="noopener" href="https://remark42.com/docs/configuration/parameters/">Remark42服务器配置说明</a></p>
</li>
</ul>
<h4 id="配置外网映射"><a href="#配置外网映射" class="headerlink" title="配置外网映射"></a><strong>配置外网映射</strong></h4><p>由于博客放到外网，所以需要把Remark42进行外网映射，具体配置方式这里不做说明，需要注意的两个地方：</p>
<ul>
<li>因为GitHub pages 和 GitLab pages 都是默认使用SSL协议的https进行访问，所以映射需要同样的使用SSL部署Remark42</li>
<li>考虑前端的访问跨域问题 (后面验证好像Remark42默认支持跨域访问，但是为了保险最好也不要忽略)</li>
</ul>
<h4 id="配置Hexo的-config-yml文件"><a href="#配置Hexo的-config-yml文件" class="headerlink" title="配置Hexo的_config.yml文件"></a><strong>配置Hexo的_config.yml文件</strong></h4><p>Hexo的根目录 _config.yml, 添加如下配置：</p>
<pre><code class="yaml">aomori_remark42:
  enable: true
  # 如果要放到github pages，需要把第#1步映射到外网
  host: &#39;https://sub.yourdomain.com&#39;
  site_id: &#39;mySiteId&#39;
  # 最多显示评论数量
  max_shown_comments: 10
  theme: &quot;light&quot;
  # 用中文显示评论框
  locale: &quot;zh&quot;
  # 一些组件配置 embed 基本评论小部件 last-comments 最后评论小部件
  components: [&#39;embeded&#39;, &#39;last-comments&#39;]
  # 是否显示邮件订阅
  show_email_subscription: true
</code></pre>
<p>按照上面的配置做好了之后，基本上就可以用了，其中各个参数的含义如官方说明 (<a target="_blank" rel="noopener" href="https://remark42.com/docs/configuration/frontend/">Remark42前端配置</a>)：</p>
<pre><code class="yaml">host: string (required) – hostname of Remark42 server, same as REMARK_URL in backend config, e.g. &quot;https://demo.remark42.com&quot;

site_id: string (optional, remark by default) – the SITE that you passed to Remark42 instance on start of backend.

url: string (optional, window.location.origin + window.location.pathname by default) – url to the page with comments, it is used as unique identificator for comments thread
Note that if you use query parameters as significant part of URL (the one that actually changes content on page) you will have to configure URL manually to keep query params, as window.location.origin + window.location.pathname doesn&#39;t contain query params and hash. For example, default URL for https://example/com/example-post?id=1#hash would be https://example/com/example-post

components: [&#39;embed&#39; | &#39;last-comments&#39; | &#39;counter&#39;] (optional, [&#39;embed&#39;] by default) – an array of widgets that should be rendered on a page. You may use more than one widget on a page.
Available components are:

&#39;embed&#39; – basic comments widget
&#39;last-comments&#39; – last comments widget, see Last Comments section below
&#39;counter&#39; – counter widget, see Counter section below
max_shown_comments: number (optional, 15 by default) – maximum number of comments that is renered on mobile version

theme: &#39;light&#39; | &#39;dark&#39; (optional, &#39;light&#39; by default) – changes UI theme

page_title: string (optional, document.title by default) – title for current comments page

locale: enum (optional, &#39;en&#39; by default) – interface localization, check possible localizations

show_email_subscription: boolean (optional, true by default) – enables email subscription feature in interface when enable it from backend side, if you set this param in false you will get notifications email notifications as admin but your users won&#39;t have interface for subscription

simple_view: boolean (optional, false by default) – overrides the parameter from the backend minimized UI with basic info only
</code></pre>
<h4 id="遇到的问题"><a href="#遇到的问题" class="headerlink" title="遇到的问题"></a>遇到的问题</h4><h5 id="配置Remark42需要SSL证书"><a href="#配置Remark42需要SSL证书" class="headerlink" title="配置Remark42需要SSL证书"></a>配置Remark42需要SSL证书</h5><p>可以去阿里云官网去申请免费的ssl证书，然后在适当的位置配置上就可以</p>
<h5 id="Remrk客户端显示不了登陆选项"><a href="#Remrk客户端显示不了登陆选项" class="headerlink" title="Remrk客户端显示不了登陆选项"></a>Remrk客户端显示不了登陆选项</h5><p>Remark42默认没有配置任何登陆选项，请至少打开 –scret.anno 以支持匿名评论，其他的认证方式情参考官网说明<a target="_blank" rel="noopener" href="https://remark42.com/docs/configuration/authorization/">Remark42认证权限说明</a></p>

        </div>

    </div>

    

    

    

    

    

    
<nav class="article-nav">
  
    <a href="/article/20220004.html" id="article-nav-newer" class="article-nav-link-wrap">
      <div class="article-nav-caption">下一篇</div>
      <div class="article-nav-title">
        
          用jsDelivr和Github做免费的CDN加速
        
      </div>
    </a>
  
  
    <a href="/article/20220001.html" id="article-nav-older" class="article-nav-link-wrap">
      <div class="article-nav-caption">上一篇</div>
      <div class="article-nav-title">Alpine和eleventy搭配的基本使用</div>
    </a>
  
</nav>


    <!-- <section class="share">
        <div class="share-title">分享</div>
        <a class="share-item" target="_blank"
            href="https://twitter.com/share?text=Hexo的aomori主题使用Remark42搭建文章评论功能 - Climb Crab&url=http%3A%2F%2Fblog.liq2.com%2Farticle%2F20220002.html">
            <box-icon type='logo' name='twitter'></box-icon>
        </a>
        <a class="share-item" target="_blank"
            href="https://www.facebook.com/sharer.php?title=Hexo的aomori主题使用Remark42搭建文章评论功能 - Climb Crab&u=http%3A%2F%2Fblog.liq2.com%2Farticle%2F20220002.html">
            <box-icon name='facebook-square' type='logo' ></box-icon>
        </a>
        <a class="share-item" target="_blank"
            href="https://service.weibo.com/share/share.php?title=Hexo的aomori主题使用Remark42搭建文章评论功能 - Climb Crab&url=http://blog.liq2.com/article/20220002.html&pic=">
            <div class="n-icon n-icon-weibo"></div>
        </a>
    </section> -->

</article>












<section id="remark42"></section>
<script>
    (function() {
        window.remark_config = {
            host: "https://remark42.liq2.com",
            site_id: "Liq2Blog",
            max_shown_comments: "10",
            theme: "light",
            locale: "zh",
            show_email_subscription: "true",
            components: ['embed']
        }
        var d = document, s = d.createElement('script');
        s.src = remark_config.host + '/web/embed.js';
        s.defer = true;
        (d.head || d.body).appendChild(s);
    })();
</script>





</div>
                </section>
            </section>

            
            <aside class="sidebar ">
                


<div class="widget" id="widget">
    
      
  <div class="widget-wrap">
    <div class="widget-inner">
      <div class="toc post-toc-html"></div>
    </div>
  </div>

    
      
  <div class="widget-wrap widget-cate">
    <div class="widget-title"><span>Categories</span></div>
    <div class="widget-inner">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Java%E5%90%8E%E7%AB%AF/">Java后端</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Web%E5%89%8D%E7%AB%AF/">Web前端</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Web%E5%89%8D%E7%AB%AF/Hexo%E5%AD%A6%E4%B9%A0/">Hexo学习</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E9%9A%8F%E4%BE%BF%E5%86%99%E5%86%99/">随便写写</a></li></ul>
    </div>
  </div>


    
      
  <div class="widget-wrap widget-tags">
    <div class="widget-title"><span>Tags</span></div>
    <div class="widget-inner">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/11ty/" rel="tag">11ty</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Alpine/" rel="tag">Alpine</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Hexo/" rel="tag">Hexo</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/JUC/" rel="tag">JUC</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/eleventy/" rel="tag">eleventy</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%A4%9A%E7%BA%BF%E7%A8%8B/" rel="tag">多线程</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8/" rel="tag">工具使用</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%BF%83%E6%83%85%E8%AE%B0%E5%BD%95/" rel="tag">心情记录</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%BA%BF%E7%A8%8B%E6%B1%A0/" rel="tag">线程池</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%83%A1%E8%A8%80%E4%B9%B1%E8%AF%AD/" rel="tag">胡言乱语</a></li></ul>
    </div>
  </div>


    
      
  <div class="widget-wrap widget-recent-posts">
    <div class="widget-title"><span>Recent Posts</span></div>
    <div class="widget-inner">
      <ul>
        
          <li>
            <a href="/article/20220004.html">用jsDelivr和Github做免费的CDN加速</a>
          </li>
        
          <li>
            <a href="/article/20220002.html">Hexo的aomori主题使用Remark42搭建文章评论功能</a>
          </li>
        
          <li>
            <a href="/article/20220001.html">Alpine和eleventy搭配的基本使用</a>
          </li>
        
          <li>
            <a href="/article/20220003.html">JAVA多线程总结之一</a>
          </li>
        
          <li>
            <a href="/article/20220004.html">开通博客第一天</a>
          </li>
        
      </ul>
    </div>
  </div>

    
      
  <div class="widget-wrap widget-archive">
    <div class="widget-title"><span>Archive</span></div>
    <div class="widget-inner">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/">2022</a></li></ul>
    </div>
  </div>


    
</div>

<div id="backtop"><i class="icon icon-arrow-up"></i></div>
            </aside>
            
        </div>
    </div>

    <footer class="footer">
    <div class="footer-wave">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1440 320"><path fill="#3c4859" fill-opacity="1" d="M0,160L60,181.3C120,203,240,245,360,240C480,235,600,181,720,186.7C840,192,960,256,1080,261.3C1200,267,1320,213,1380,186.7L1440,160L1440,320L1380,320C1320,320,1200,320,1080,320C960,320,840,320,720,320C600,320,480,320,360,320C240,320,120,320,60,320L0,320Z"></path></svg>
    </div>

    <!-- Please do not remove this -->
    <!-- 开源不易，请勿删除 -->
    <div class="footer-wrap">
        <div class="footer-inner"> 
            Climb Crab &copy; 2022<br>
            Powered By Hexo · Theme By <a href="https://linhong.me/" target="_blank">Aomori</a> · <a href="https://github.com/lh1me/hexo-theme-aomori" target="_blank">Github</a>
        </div>
    </div>

</footer>






<script src="/dist/build.js?1651727875408.js"></script>


<script src="/dist/custom.js?1651727875408.js"></script>













</body>

</html>